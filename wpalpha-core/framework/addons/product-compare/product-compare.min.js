"use strict";window.theme||(window.theme={}),function(e){theme.productCompare=function(){function a(e,a=!0){var o=e.html(),t=a?1:-1;o=o.replace(/[^0-9]/,""),(o=parseInt(o)+t)>=0&&o<=alpha_vars.compare_limit&&e.html(o)}e(document).on("click",".product a.compare:not(.added)",(function(a){a.preventDefault();var o=e(this),t={action:"alpha_add_to_compare",id:o.data("product_id"),minicompare:e(".header .compare-dropdown").length?e(".header .compare-dropdown").data("minicompare-type"):"",_wpnonce:alpha_vars.nonce};theme.doLoading(o,"small"),e('<div class="loading-mask"></div>').appendTo("body"),e.ajax({type:"post",url:alpha_vars.ajax_url,data:t,dataType:"json",success:function(a){theme.endLoading(o),e(".loading-mask").remove(),void 0!==a.count&&(e(".header .compare-dropdown .widget_compare_content").length&&e(".header .compare-dropdown .widget_compare_content").html(e(a.minicompare).find(".widget_compare_content").html()),e(document).trigger("added_to_compare",a.popup_template),o.addClass("added"),o.attr("href",a.url))}})})).on("click",".remove_from_compare",(function(o){o.preventDefault();var t=e(this),p={action:"alpha_remove_from_compare",id:t.data("product_id"),_wpnonce:alpha_vars.nonce};theme.doLoading(t,"small"),e.ajax({type:"post",url:alpha_vars.ajax_url,data:p,dataType:"json",success:function(o){void 0!==o.count&&(theme.endLoading(t),t.closest(".compare-popup").length?(t.closest("li").empty(),a(e(".compare-popup .compare-heading mark"),!1)):void 0!==o.compare_table&&t.closest(".alpha-compare-table").replaceWith(o.compare_table),e(document).trigger("removed_from_compare",p.id))}})})).on("click",".compare-popup-overlay",(function(){e(".page-wrapper > .compare-popup").removeClass("show")})).on("click",".alpha-compare-table .to-left, .alpha-compare-table .to-right",(function(a){if(a.preventDefault(),!e(this).closest(".compare-basic-info").find(".d-loading").length){var o=e(this),t=o.closest(".compare-value").index()-1;o.closest(".compare-col").hasClass("last-col")&&o.hasClass("to-right")||e(this).closest(".alpha-compare-table").find(".compare-row").each((function(){var a=e(this).children(".compare-value").eq(t),p=o.hasClass("to-left")?a.prev():a.next(),r=(o.hasClass("to-left")?"-":"")+"20%",c=(o.hasClass("to-left")?"":"-")+"20%";p.hasClass("compare-field")||(a.animate({left:r},200,(function(){a.css("left",""),o.hasClass("to-left")?a.after(p):a.before(p)})),p.animate({left:c},200,(function(){p.css("left","")})),setTimeout((function(){(p.hasClass("last-col")||a.hasClass("last-col"))&&(a.toggleClass("last-col"),p.toggleClass("last-col"))}),200))}))}})).on("click",".compare-clean",(function(a){a.preventDefault(),e(".remove_from_compare").each((function(){var a=e(this).data("product_id");e('.compare[data-product_id="'+a+'"]').removeClass("added")})),e(".compare-popup li").empty(),e(".compare-popup .compare-heading mark").text("0"),e.post(alpha_vars.ajax_url,{action:"alpha_clean_compare"}),e(".header .compare-open .compare-count").html("0")})).on("added_to_compare",(function(o,t){if(t)if("offcanvas"==alpha_vars.compare_popup_type){var p=e(".page-wrapper > .compare-popup");p.length||(e(".page-wrapper").append('<div class="compare-popup"></div><div class="compare-popup-overlay"></div>'),p=e(".page-wrapper > .compare-popup")),p.html(t),theme.slider(".compare-popup .slider-wrapper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{992:{spaceBetween:30},768:{spaceBetween:20}},scrollbar:{el:".slider-scrollbar",dragClass:"slider-scrollbar-drag",draggable:!0}}),theme.requestTimeout((function(){p.addClass("show")}),60)}else theme.minipopup.open({content:t});if(e(".header .compare-open").length){var r=e(".header .compare-open").find(".compare-count");r.length&&a(r)}})).on("removed_from_compare",(function(o,t){if(e('.compare[data-product_id="'+t+'"]').removeClass("added"),e(".header .compare-open").length){var p=e(".header .compare-open").find(".compare-count"),r=e(".header .compare-dropdown");p.length&&a(p,!1),r.find(".mini-item").length>1?r.find('.remove_from_compare[data-product_id="'+t+'"]').closest(".mini-item").remove():r.find(".widget_compare_content").html(e("script.alpha-minicompare-no-item-html").html())}})).on("click",".compare-offcanvas .compare-open",(function(a){e(this).closest(".compare-dropdown").toggleClass("opened"),a.preventDefault()})).on("click",".compare-offcanvas .btn-close",(function(a){a.preventDefault(),e(this).closest(".compare-dropdown").removeClass("opened")})).on("click",".compare-offcanvas .compare-overlay",(function(a){e(this).closest(".compare-dropdown").removeClass("opened")}))},e(window).on("alpha_complete",theme.productCompare)}(jQuery);